module.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){},function(t,e){var r,n,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var u,l=[],h=!1,c=-1;function f(){h&&u&&(h=!1,u.length?l=u.concat(l):c=-1,l.length&&y())}function y(){if(!h){var t=a(f);h=!0;for(var e=l.length;e;){for(u=l,l=[];++c<e;)u&&u[c].run();c=-1,e=l.length}u=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new p(t,e)),1!==l.length||h||a(y)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var s=r(3),o=function(t,e){var r=Object.keys(t);return!0===e?r:r.map(e||function(e){return t[e]})},a=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.flow="string"==typeof r?JSON.parse(r):JSON.parse(JSON.stringify(r)),this.flow.name=this.flow.name||this.id,this.registerValidator(s),this._buildGraph(),this._onChange()}return i(t,[{key:"_ensureVertex",value:function(t,e){var r=this.graph.vertices,i=r[t];return i?e&&(i.info=n({},i.info,e||Object.create(null))):r[t]={id:t,children:Object.create(null),parents:Object.create(null),info:n({terminal:!1},e||Object.create(null))},r[t]}},{key:"_deleteVertex",value:function(t){delete this.graph.vertices[t]}},{key:"_getVertexChildren",value:function(t,e,r){var n=this;return o(this.graph.vertices[t].children[e],r||function(t){return n.getVertex(t)})}},{key:"_getVertexParents",value:function(t,e){var r=this;return o(this.graph.vertices[t].parents,e||function(t){return r.getVertex(t)})}},{key:"_ensureEdge",value:function(t,e,r){var n=this.getEdge(t,e,r);if(n)return n;n={output:t,to:r,from:e};var i=this._ensureVertex(e),s=this._ensureVertex(r);return this.graph.edges.push(n),i.children[t]=i.children[t]||Object.create(null),i.children[t][r]=!0,s.parents[e]=!0,n}},{key:"_deleteEdge",value:function(t,e,r){this.graph.edges=this.graph.edges.filter(function(n){return!(n.output===e&&n.to===r&&n.from===t)});var n=this.getVertex(r);n&&delete n.parents[t];var i=this.getVertex(t);i&&delete i.children[e][r],Object.keys(i.children[e]).length||delete i.children[e],Object.keys(i.children).length||(i.info.terminal=!0)}},{key:"_deleteEdges",value:function(t,e){this.graph.edges=this.graph.edges.filter(function(r){return!(r.to===e&&r.from===t)});var r=this.getVertex(e);r&&delete r.parents[t];var n=this.getVertex(t);n&&Object.keys(n.children).forEach(function(t){delete n.children[t][e]})}},{key:"_deleteOutput",value:function(t,e){var r=this,n=this.getNode(t);if(!n)throw new Error("Node "+t+" does not exist");var i=n.outputs[e];if(!i)throw new Error("Output "+e+" does not exist on node "+t);var s=i.routes;s&&s.forEach(function(n){r.deleteRoute(e,t,n)}),delete n.outputs[e]}},{key:"_setValidation",value:function(t){this.flow["x-validation"]=t}},{key:"_getOutputRoutes",value:function(t){var e=this.flow.nodes[t];return e?Object.keys(e.outputs).reduce(function(t,r){var n=e.outputs[r];return n.routes&&n.routes.length>0?t[r]=n.routes:t[r]=[],t},Object.create(null)):null}},{key:"_onChange",value:function(){this.symbol=Symbol(this.id)}},{key:"_buildGraph",value:function(){var t=this;this.graph={vertices:Object.create(null),edges:[]},Object.keys(this.flow.nodes).forEach(function(e){t._buildVertex(e)})}},{key:"_buildVertex",value:function(t){var e=this;this.flow.nodes[t].name||(this.flow.nodes[t].name=t);var r=this._getOutputRoutes(t);null!==r&&Object.keys(r).length?Object.keys(r).forEach(function(n){var i=r[n];i&&i.length?i.forEach(function(r){e._ensureEdge(n,t,r)}):e._ensureVertex(t,{terminal:!0})}):this._ensureVertex(t,{terminal:!0})}},{key:"changeNodeName",value:function(t,e){this.getNodeUnsafe(t).name=e}},{key:"changeMethod",value:function(t,e,r){for(var i=this,s=this.getNodeUnsafe(t),o=s.parameters.length-1;o>=0;o--)this._removeParameter(t,o);var a=r&&r.methods[e];if(!a)throw new Error("method "+e+" does not exist in provided flow-node");var u=a.outputs||{};Object.keys(s.outputs).forEach(function(e){u[e]||i._deleteOutput(t,e)}),Object.keys(u).forEach(function(t){var e=u[t],r=n({routes:[]},s.outputs[t]||{});e.context&&e.context!==r.context&&(r.context=e.context),s.outputs[t]=r});var l=s.method&&r&&r.methods[s.method]&&r.methods[s.method].name||s.method;s.name!==t&&s.name!==l||(s.name=a.name||e),s.method=e,this._onChange()}},{key:"insertNode",value:function(t,e){if(e){if(this.getNode(e))throw new Error("a node with that id already exists: "+e)}else{var r=t.type.substr(t.type.lastIndexOf("/")+1),n=void 0,i=1;do{e=r+"."+i,n=this.getNode(e),i+=1}while(n)}return this.isEmpty()&&(this.flow.start=e),this.flow.nodes[e]=t,this._buildVertex(e),this._onChange(),e}},{key:"deleteNode",value:function(t){var e=this;if(this.getNode(t)){var r=this.getParents(t,!0),n=this.getChildren(t,!0);r.forEach(function(r){e.deleteRoutes(r,t)}),n.forEach(function(r){e.deleteRoutes(t,r)}),this.flow.start===t&&(this.flow.start=null),this._deleteVertex(t),delete this.flow.nodes[t],this._onChange()}}},{key:"deleteRoute",value:function(t,e,r){this._deleteEdge(e,t,r);var n=this.getNode(e);n&&n.outputs&&n.outputs[t]&&n.outputs[t].routes&&n.outputs[t].routes.length&&(n.outputs[t].routes=n.outputs[t].routes.filter(function(t){return t!==r}))}},{key:"deleteRoutes",value:function(t,e){this._deleteEdges(t,e);var r=this.getNode(t);r&&r.outputs&&Object.keys(r.outputs).length>0&&Object.keys(r.outputs).forEach(function(t){r.outputs[t].routes&&r.outputs[t].routes.length&&(r.outputs[t].routes=r.outputs[t].routes.filter(function(t){return t!==e}))})}},{key:"setStart",value:function(t){if(!this.getNode(t))throw new Error("start node not found: "+t);this.flow.start!==t&&(this.flow.start=t,this._onChange())}},{key:"unsetStart",value:function(){this.flow.start=null,this._onChange()}},{key:"addParameter",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"jsonpath",i=this.getNodeUnsafe(t);if(!e)throw new Error("parameter name required");if(-1!==this._getParameterIndex(t,e))throw new Error("parameter already exists");if("string"!=typeof r&&void 0!==r)throw new Error("value is not a string");if(!["jsonpath","array","null","object","string","number","boolean"].includes(n))throw new Error("invalid type");i.parameters.push({name:e,type:n,value:r}),this._onChange()}},{key:"updateParameter",value:function(t,e,r,i){var s=this._getParameterIndex(t,e),o=void 0;o=-1!==s?this._removeParameter(t,s):{name:e};var a=void 0;if("string"==typeof r){if(!["type","name","value"].includes(r))throw new Error("prop must be one of type, name, or value");a=n({},o,function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}({},r,i))}else{if(!r||r.constructor!==Object)throw new Error("prop must be a string or an object");a=r}this.addParameter(t,a.name,a.value,a.type)}},{key:"_getParameter",value:function(t,e){var r=this._getParameterIndex(t,e);if(-1===r)throw new Error("parameter "+e+" does not exist in node "+t);return this.getNode(t).parameters[r]}},{key:"_getParameterIndex",value:function(t,e){return this.getNodeUnsafe(t).parameters.findIndex(function(t){return t.name===e})}},{key:"_removeParameter",value:function(t,e){var r=this.getNodeUnsafe(t);if("number"!=typeof e)throw new Error("parameter index must be a number");if(e>=r.parameters.length||e<0)throw new Error("parameter with index "+e+" does not exist in node "+t);return r.parameters.splice(e,1)[0]}},{key:"removeParameter",value:function(t,e){if(!e)throw new Error("parameter name required");var r=this._getParameterIndex(t,e);if(-1===r)throw new Error("parameter "+e+" does not exist in node "+t);var n=this._removeParameter(t,r);return this._onChange(),n}},{key:"updateOutputContext",value:function(t,e,r){var n=this.getNodeUnsafe(t);if(!e)throw new Error("output name required");var i=n.outputs[e];if(!i)throw new Error("output "+e+" does not exist");i.context=r,this._onChange()}},{key:"connectNode",value:function(t,e,r){var i=this.getNode(t);if(!i)throw new Error("source node not found: "+t);if(!i.outputs[e])throw new Error("source output not found: "+e);if(!this.getNode(r))throw new Error("target node not found: "+r);if(this.flow.nodes[t].outputs[e].routes&&-1!==this.flow.nodes[t].outputs[e].routes.indexOf(r))throw new Error("route already exists: "+t+":"+e+" to "+r);this.flow.nodes[t].outputs[e]=n({},this.flow.nodes[t].outputs[e],{routes:[].concat(function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(this.flow.nodes[t].outputs[e].routes||[]),[r])}),this._ensureEdge(e,t,r),this._onChange()}},{key:"disconnectNode",value:function(t,e,r){this.deleteRoute(e,t,r),this._onChange()}},{key:"isEmpty",value:function(){return!Object.keys(this.flow.nodes).length}},{key:"getSymbol",value:function(){return this.symbol}},{key:"getDefinition",value:function(){return this.flow}},{key:"getGraph",value:function(){return this.graph}},{key:"getId",value:function(){return this.id}},{key:"getEdges",value:function(){return this.graph.edges}},{key:"getEdge",value:function(t,e,r){return this.graph.vertices[e]&&this.graph.vertices[e].children[t]&&this.graph.vertices[e].children[t][r]?{output:t,to:r,from:e}:null}},{key:"getVertices",value:function(t){return o(this.graph.vertices,t)}},{key:"getNodes",value:function(t){var e=this;return o(this.flow.nodes,t||function(t){return e.getNode(t)})}},{key:"getChildren",value:function(t,e,r){var n=this,i=void 0;return arguments.length<=2&&"string"!=typeof e?(r=e||!1,i=Object.keys(this.graph.vertices[t].children).reduce(function(e,r){var i=n.graph.vertices[t].children[r];return e=Object.assign(e,i)},{})):i=this.graph.vertices[t].children[e],o(i,r||function(t){return n.getNode(t)})}},{key:"getParents",value:function(t,e){var r=this;return o(this.graph.vertices[t].parents,e||function(t){return r.getNode(t)})}},{key:"getTerminalNodes",value:function(t){var e=this;return this.getVertices().filter(function(t){return t&&t.info.terminal}).map(function(r){return t?r.id:e.getNode(r.id)})}},{key:"getVertex",value:function(t){return this.graph.vertices[t]||null}},{key:"getNode",value:function(t){return this.flow.nodes[t]||null}},{key:"getNodeUnsafe",value:function(t){var e=this.flow.nodes[t];if(!e)throw new Error("node not found: "+t);return e}},{key:"getValidation",value:function(){return this.flow["x-validation"]||Object.create(null)}},{key:"registerValidator",value:function(t){this.FlowValidator=t}},{key:"validate",value:function(){var t=new this.FlowValidator(this).validate();return this._setValidation(t),t}}]),t}();a.Validator=s,t.exports=a},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var s=r(4),o=s.validateJsonPathSelectors,a=s.validateJsonPathSelector,u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flowGraph=e,this.index=0}return i(t,[{key:"_strongconnect",value:function(t,e,r){var n=this;if(t.info.index=this.index,t.info.lowlink=this.index,this.index+=1,e.push(t),t.info.onStack=!0,this.flowGraph.getChildren(t.id,!0).forEach(function(i){var s=n.flowGraph.getVertex(i);void 0===s.info.index?(n._strongconnect(s,e,r),t.info.lowlink=Math.min(t.info.lowlink,s.info.lowlink)):s.info.onStack&&(t.info.lowlink=Math.min(t.info.lowlink,s.info.lowlink))}),t.info.lowlink===t.info.index){var i=[];if(e.length>0){var s=null;do{(s=e.pop()).info.onStack=!1,i.push(s)}while(s!==t);r.push(i)}}}},{key:"_parseParamValue",value:function(t){if(t.type&&"jsonpath"!==t.type){var e=void 0;try{e=JSON.parse(t.value)}catch(t){e=void 0}return"string"!==t.type||void 0!==e&&"string"==typeof e?"boolean"!==t.type||void 0!==e&&"boolean"==typeof e?"number"!==t.type||void 0!==e&&"number"==typeof e?"array"!==t.type||void 0!==e&&Array.isArray(e)?"null"!==t.type||void 0!==e&&null===e?"object"!==t.type||void 0!==e&&"object"===(void 0===e?"undefined":n(e))&&!Array.isArray(e)&&null!==e?void 0===e?{error:"INVALID_TYPE"}:{data:e}:{error:"INVALID_OBJECT"}:{error:"INVALID_NULL"}:{error:"INVALID_ARRAY"}:{error:"INVALID_NUMBER"}:{error:"INVALID_BOOLEAN"}:{error:"INVALID_STRING"}}return void 0===t.value?{error:"MISSING_VALUE"}:a(t.value)?{error:"INVALID_JSONPATH"}:{data:t.value}}},{key:"_addValidationError",value:function(t,e){t.valid=!1,t.errors=t.errors||[],t.errors.push(e)}},{key:"_addValidationWarning",value:function(t,e){t.warnings=t.warnings||[],t.warnings.push(e)}},{key:"checkForLoops",value:function(t){var e=this,r=!1,n=[],i=[];this.flowGraph.getVertices().forEach(function(t){void 0===t.info.index&&e._strongconnect(t,n,i)});var s=i.filter(function(t){var r=e.flowGraph.getChildren(t[0].id,!0)[0],n=r&&e.flowGraph.getVertex(r);return t.length>1||1===t.length&&n===t[0]});return this.flowGraph.getVertices().forEach(function(t){delete t.info.index,delete t.info.lowlink,delete t.info.onStack}),s.length>0&&(r=!0,s.forEach(function(r,n){r.forEach(function(i){e._addValidationError(t,{type:"loop",code:"INVALID_NODE",detail:{node:i.id,nodes:r.map(function(t){return t.id}),loopIndex:n}})})})),r}},{key:"checkForMissingRoutes",value:function(t){var e=this,r=!1;return this.flowGraph.getNodes(!0).forEach(function(n){var i=e.flowGraph._getOutputRoutes(n);Object.keys(i).forEach(function(s){i[s].forEach(function(i){e.flowGraph.getNode(i)||(r=!0,e._addValidationError(t,{type:"invalidNodeRoute",code:"INVALID_NODE",detail:{node:n,output:s,route:i}}))})})}),r}},{key:"checkForInvalidStart",value:function(t){var e=this.flowGraph.flow.start;return(!e||"string"!=typeof e||!this.flowGraph.getNode(e))&&(this._addValidationError(t,{type:"invalidStart",code:"INVALID_NODE"}),!0)}},{key:"checkNodeOutputContext",value:function(t){var e=this,r=!1;return this.flowGraph.getNodes(!0).forEach(function(n){var i=e.flowGraph.getNode(n);Object.keys(i.outputs).forEach(function(s){var o=i.outputs[s].context;if(o){var u=a(o);u&&(r=!0,e._addValidationError(t,{type:"invalidNodeOutput",code:"INVALID_JSONPATH",detail:{error:u.error,node:n,output:s}}))}})}),r}},{key:"checkReturns",value:function(t){var e=this,r=this.flowGraph.flow.returns;if(void 0===r||null===r)return!1;var n=o(r);return!!n&&(n.forEach(function(r){e._addValidationError(t,{type:"invalidReturns",code:"INVALID_JSONPATH",detail:{error:r.error}})}),!0)}},{key:"validate",value:function(){var t={valid:!0};return this.checkForInvalidStart(t),this.checkForMissingRoutes(t),this.checkForLoops(t),this.checkNodeOutputContext(t),this.checkReturns(t),t}}]),t}();t.exports=u},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var s=new(r(5)),o=function(t){if(null===t||void 0===t||"$"===t)return null;if("string"!=typeof t)return{jsonpath:t,error:"Provided JSONPath is not a string"};if(!t.startsWith("$"))return{jsonpath:t,error:"Provided JSONPath does not start with '$'"};try{s.parse(t)}catch(e){return{jsonpath:t,error:e.message||e.toString()}}return null};t.exports={validateJsonPathSelectors:function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=null;if("string"==typeof e&&e.startsWith("$")){var a=o(e);a&&(s=s?[a].concat(i(s)):[a])}else e&&"object"===(void 0===e?"undefined":n(e))&&Object.keys(e).forEach(function(n){var o=t(e[n],[].concat(i(r),[n]));o&&(s=s?[].concat(i(o),i(s)):o)});return s},validateJsonPathSelector:o}},function(t,e,r){var n=r(6),i=r(10),s=function(){var t=new i.Parser,e=t.parseError;return t.yy.parseError=function(){t.yy.ast&&t.yy.ast.initialize(),e.apply(t,arguments)},t};s.grammar=n,t.exports=s},function(t,e,r){var n=r(7),i=r(0),s={lex:{macros:{esc:"\\\\",int:n.integer},rules:[["\\$","return 'DOLLAR'"],["\\.\\.","return 'DOT_DOT'"],["\\.","return 'DOT'"],["\\*","return 'STAR'"],[n.identifier,"return 'IDENTIFIER'"],["\\[","return '['"],["\\]","return ']'"],[",","return ','"],["({int})?\\:({int})?(\\:({int})?)?","return 'ARRAY_SLICE'"],["{int}","return 'INTEGER'"],[n.qq_string,"yytext = yytext.substr(1,yyleng-2); return 'QQ_STRING';"],[n.q_string,"yytext = yytext.substr(1,yyleng-2); return 'Q_STRING';"],["\\(.+?\\)(?=\\])","return 'SCRIPT_EXPRESSION'"],["\\?\\(.+?\\)(?=\\])","return 'FILTER_EXPRESSION'"]]},start:"JSON_PATH",bnf:{JSON_PATH:[["DOLLAR",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["DOLLAR PATH_COMPONENTS",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["LEADING_CHILD_MEMBER_EXPRESSION","yy.ast.unshift(); return yy.ast.yield()"],["LEADING_CHILD_MEMBER_EXPRESSION PATH_COMPONENTS",'yy.ast.set({ operation: "member", scope: "child", expression: { type: "identifier", value: $1 }}); yy.ast.unshift(); return yy.ast.yield()']],PATH_COMPONENTS:[["PATH_COMPONENT",""],["PATH_COMPONENTS PATH_COMPONENT",""]],PATH_COMPONENT:[["MEMBER_COMPONENT",'yy.ast.set({ operation: "member" }); yy.ast.push()'],["SUBSCRIPT_COMPONENT",'yy.ast.set({ operation: "subscript" }); yy.ast.push() ']],MEMBER_COMPONENT:[["CHILD_MEMBER_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_MEMBER_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_MEMBER_COMPONENT:[["DOT MEMBER_EXPRESSION",""]],LEADING_CHILD_MEMBER_EXPRESSION:[["MEMBER_EXPRESSION",'yy.ast.set({ scope: "child", operation: "member" })']],DESCENDANT_MEMBER_COMPONENT:[["DOT_DOT MEMBER_EXPRESSION",""]],MEMBER_EXPRESSION:[["STAR",'yy.ast.set({ expression: { type: "wildcard", value: $1 } })'],["IDENTIFIER",'yy.ast.set({ expression: { type: "identifier", value: $1 } })'],["SCRIPT_EXPRESSION",'yy.ast.set({ expression: { type: "script_expression", value: $1 } })'],["INTEGER",'yy.ast.set({ expression: { type: "numeric_literal", value: parseInt($1) } })'],["END",""]],SUBSCRIPT_COMPONENT:[["CHILD_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_SUBSCRIPT_COMPONENT:[["[ SUBSCRIPT ]",""]],DESCENDANT_SUBSCRIPT_COMPONENT:[["DOT_DOT [ SUBSCRIPT ]",""]],SUBSCRIPT:[["SUBSCRIPT_EXPRESSION",""],["SUBSCRIPT_EXPRESSION_LIST",'$1.length > 1? yy.ast.set({ expression: { type: "union", value: $1 } }) : $$ = $1']],SUBSCRIPT_EXPRESSION_LIST:[["SUBSCRIPT_EXPRESSION_LISTABLE","$$ = [$1]"],["SUBSCRIPT_EXPRESSION_LIST , SUBSCRIPT_EXPRESSION_LISTABLE","$$ = $1.concat($3)"]],SUBSCRIPT_EXPRESSION_LISTABLE:[["INTEGER",'$$ = { expression: { type: "numeric_literal", value: parseInt($1) } }; yy.ast.set($$)'],["STRING_LITERAL",'$$ = { expression: { type: "string_literal", value: $1 } }; yy.ast.set($$)'],["ARRAY_SLICE",'$$ = { expression: { type: "slice", value: $1 } }; yy.ast.set($$)']],SUBSCRIPT_EXPRESSION:[["STAR",'$$ = { expression: { type: "wildcard", value: $1 } }; yy.ast.set($$)'],["SCRIPT_EXPRESSION",'$$ = { expression: { type: "script_expression", value: $1 } }; yy.ast.set($$)'],["FILTER_EXPRESSION",'$$ = { expression: { type: "filter_expression", value: $1 } }; yy.ast.set($$)']],STRING_LITERAL:[["QQ_STRING","$$ = $1"],["Q_STRING","$$ = $1"]]}};i.readFileSync&&(s.moduleInclude=i.readFileSync(8),s.actionInclude=i.readFileSync(9)),t.exports=s},function(t,e){t.exports={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}},function(t,e){},function(t,e){yy.ast||(yy.ast=_ast,_ast.initialize())},function(t,e,r){(function(t,n){var i=function(){var t={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(t,r,n,i,s,o,a){i.ast||(i.ast=e,e.initialize());var u=o.length-1;switch(s){case 1:return i.ast.set({expression:{type:"root",value:o[u]}}),i.ast.unshift(),i.ast.yield();case 2:return i.ast.set({expression:{type:"root",value:o[u-1]}}),i.ast.unshift(),i.ast.yield();case 3:return i.ast.unshift(),i.ast.yield();case 4:return i.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:o[u-1]}}),i.ast.unshift(),i.ast.yield();case 5:case 6:break;case 7:i.ast.set({operation:"member"}),i.ast.push();break;case 8:i.ast.set({operation:"subscript"}),i.ast.push();break;case 9:i.ast.set({scope:"child"});break;case 10:i.ast.set({scope:"descendant"});break;case 11:break;case 12:i.ast.set({scope:"child",operation:"member"});break;case 13:break;case 14:i.ast.set({expression:{type:"wildcard",value:o[u]}});break;case 15:i.ast.set({expression:{type:"identifier",value:o[u]}});break;case 16:i.ast.set({expression:{type:"script_expression",value:o[u]}});break;case 17:i.ast.set({expression:{type:"numeric_literal",value:parseInt(o[u])}});break;case 18:break;case 19:i.ast.set({scope:"child"});break;case 20:i.ast.set({scope:"descendant"});break;case 21:case 22:case 23:break;case 24:o[u].length>1?i.ast.set({expression:{type:"union",value:o[u]}}):this.$=o[u];break;case 25:this.$=[o[u]];break;case 26:this.$=o[u-2].concat(o[u]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(o[u])}},i.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:o[u]}},i.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:o[u]}},i.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:o[u]}},i.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:o[u]}},i.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:o[u]}},i.ast.set(this.$);break;case 33:case 34:this.$=o[u]}},table:[{3:1,4:[1,2],6:3,13:4,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,12],12:[2,12],14:[2,12],22:[2,12]},{1:[2,14],12:[2,14],14:[2,14],22:[2,14]},{1:[2,15],12:[2,15],14:[2,15],22:[2,15]},{1:[2,16],12:[2,16],14:[2,16],22:[2,16]},{1:[2,17],12:[2,17],14:[2,17],22:[2,17]},{1:[2,18],12:[2,18],14:[2,18],22:[2,18]},{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,5],12:[2,5],14:[2,5],22:[2,5]},{1:[2,7],12:[2,7],14:[2,7],22:[2,7]},{1:[2,8],12:[2,8],14:[2,8],22:[2,8]},{1:[2,9],12:[2,9],14:[2,9],22:[2,9]},{1:[2,10],12:[2,10],14:[2,10],22:[2,10]},{1:[2,19],12:[2,19],14:[2,19],22:[2,19]},{1:[2,20],12:[2,20],14:[2,20],22:[2,20]},{13:23,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{13:24,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9],22:[1,25]},{15:[1,29],17:[1,30],18:[1,33],23:26,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,6],12:[2,6],14:[2,6],22:[2,6]},{1:[2,11],12:[2,11],14:[2,11],22:[2,11]},{1:[2,13],12:[2,13],14:[2,13],22:[2,13]},{15:[1,29],17:[1,30],18:[1,33],23:38,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},{24:[2,25],28:[2,25]},{24:[2,27],28:[2,27]},{24:[2,28],28:[2,28]},{24:[2,29],28:[2,29]},{24:[2,33],28:[2,33]},{24:[2,34],28:[2,34]},{24:[1,41]},{1:[2,21],12:[2,21],14:[2,21],22:[2,21]},{18:[1,33],27:42,29:34,30:[1,35],32:[1,36],33:[1,37]},{1:[2,22],12:[2,22],14:[2,22],22:[2,22]},{24:[2,26],28:[2,26]}],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,r=[0],n=[null],i=[],s=this.table,o="",a=0,u=0,l=0,h=1,c=i.slice.call(arguments,1);this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;i.push(f);var y=this.lexer.options&&this.lexer.options.ranges;function p(){var t;return"number"!=typeof(t=e.lexer.lex()||h)&&(t=e.symbols_[t]||t),t}"function"==typeof this.yy.parseError?this.parseError=this.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var d,g,v,_,E,m,S,N,b,I={};;){if(v=r[r.length-1],this.defaultActions[v]?_=this.defaultActions[v]:(null!==d&&void 0!==d||(d=p()),_=s[v]&&s[v][d]),void 0===_||!_.length||!_[0]){var x="";for(m in b=[],s[v])this.terminals_[m]&&m>2&&b.push("'"+this.terminals_[m]+"'");x=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(a+1)+": Unexpected "+(d==h?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:f,expected:b})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+d);switch(_[0]){case 1:r.push(d),n.push(this.lexer.yytext),i.push(this.lexer.yylloc),r.push(_[1]),d=null,g?(d=g,g=null):(u=this.lexer.yyleng,o=this.lexer.yytext,a=this.lexer.yylineno,f=this.lexer.yylloc,l>0&&l--);break;case 2:if(S=this.productions_[_[1]][1],I.$=n[n.length-S],I._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},y&&(I._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),void 0!==(E=this.performAction.apply(I,[o,u,a,this.yy,_[1],n,i].concat(c))))return E;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),i=i.slice(0,-1*S)),r.push(this.productions_[_[1]][0]),n.push(I.$),i.push(I._$),N=s[r[r.length-2]][r[r.length-1]],r.push(N);break;case 3:return!0}}return!0}},e={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(t){for(var e in t)this._node[e]=t[e];return this._node},node:function(t){return arguments.length&&(this._node=t),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var t=this._nodes;return this.initialize(),t}},r={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var s in i)this[s]=i[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),s=0;s<i.length;s++)if((r=this._input.match(this.rules[i[s]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=s,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[s])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,n){switch(r){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return e.yytext=e.yytext.substr(1,e.yyleng-2),32;case 11:return e.yytext=e.yytext.substr(1,e.yyleng-2),33;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function n(){this.yy={}}return t.lexer=r,n.prototype=t,t.Parser=n,new n}();e.parser=i,e.Parser=i.Parser,e.parse=function(){return i.parse.apply(i,arguments)},e.main=function(n){n[1]||(console.log("Usage: "+n[0]+" FILE"),t.exit(1));var i=r(0).readFileSync(r(12).normalize(n[1]),"utf8");return e.parser.parse(i)},void 0!==n&&r.c[r.s]===n&&e.main(t.argv.slice(1))}).call(e,r(1),r(11)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return n.exec(t).slice(1)};function s(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var o=i>=0?arguments[i]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,n="/"===o.charAt(0))}return e=r(s(e.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+e||"."},e.normalize=function(t){var n=e.isAbsolute(t),i="/"===o(t,-1);return(t=r(s(t.split("/"),function(t){return!!t}),!n).join("/"))||n||(t="."),t&&i&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(s(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),s=n(r.split("/")),o=Math.min(i.length,s.length),a=o,u=0;u<o;u++)if(i[u]!==s[u]){a=u;break}var l=[];for(u=a;u<i.length;u++)l.push("..");return(l=l.concat(s.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=i(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return i(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(e,r(1))}]);